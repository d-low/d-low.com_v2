<h2 class="content-header">
  <!-- TODO: The breadcrumb conflicts with the header title, we need one or the other. -->
  <span class="content-header-title">
    <%= content.get("title") %>
  </span>
  <nav class="content-header-title-nav">
    <% 

    for (var i = 0, titleNav = content.get("titleNav"); i < titleNav.length; i++) {
      if (titleNav[i].url) {

      %>

        <a href="<%= titleNav[i].url %>"><%= titleNav[i].name %></a>
        <span>/</span>

      <%

      }
      else {

      %>

        <span><%= titleNav[i].name %></span>
        
      <%

      }
    }
    
    %>
  </nav>
</h2>
 
<!-- TODO: Move this logic to the view and create new templates -->
<% if (content.areChildrenPosts()) { %>
  <!--
  // TODO: Render list of posts for each content.get("posts") instance.
  -->
<% } else { %>
  <ul class="list-unstyled sub-content-items">
    <% for (var i = 0, subcontents = content.get("subcontents"); i < subcontents.length; i++) { 
        var randomImage = subcontents.at(i).getRandomPost().getRandomImage();
    %>
      <li class="sub-content-item content-item-container">
        <a class="sub-content-link" href="#content/<%= subcontents.at(i).get('path') %>">
          <img alt="<%= !_.isNull(randomImage) ? randomImage.get('caption') : 'REVIEW: No images available!' %>"
            class="img-responsive js-lazy-load js-lazy-load-immediate"
            data-original="TODO: Use src value, and set ot blank.gif, when we're lazy loading images" 
            src="<%= !_.isNull(randomImage) ? randomImage.get('fullpath') : 'REVIEW: No images available!' %>" /> 
          <span class="sub-content-link-title">
            <%= subcontents.at(i).get("title") %>
          </span>
        </a>
      </li>
    <% } %>
  </ul>

<% } %>

<!-- TODO
section.content-navigation
  = render \
    :partial => '/contents_navigation', \
    :locals => { \
      :fixed => true, \
      :home_model => @home_model, \
      :random_image => @random_image \
    }
-->

